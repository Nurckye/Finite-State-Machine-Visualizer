(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{30:function(e,t,a){e.exports=a(45)},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(19),o=a.n(i),s=(a(35),a(36),a(37),a(38),a(39),a(10)),l=a(11),c=a(15),u=a(13),m=a(7),p=a(20),f=a(2),h=function(){return r.a.createElement("svg",{width:"36",height:"32",viewBox:"0 0 36 42",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M36 21L0 41.7846V0.215391L36 21Z",fill:"#202020"}))},d=function(){return r.a.createElement("svg",{width:"36",height:"30",viewBox:"0 0 36 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M31.3043 15C31.3043 11.7572 30.2077 8.60165 28.1789 6.00635C26.15 3.41105 23.2981 1.51574 20.0507 0.60445C16.8032 -0.306837 13.335 -0.185021 10.1659 0.951642C6.9967 2.08831 4.29727 4.1786 2.47209 6.90927C0.646908 9.63994 -0.205714 12.8639 0.0419945 16.0981C0.289703 19.3322 1.6244 22.4023 3.84607 24.8483C6.06774 27.2943 9.05673 28.9845 12.3651 29.6655C15.6735 30.3465 19.123 29.9817 22.1969 28.6258L15.6522 15H31.3043Z",fill:"#202020"}),r.a.createElement("ellipse",{cx:"15.6522",cy:"15",rx:"10.9565",ry:"10.5",fill:"white"}),r.a.createElement("path",{d:"M29.3479 22.5L22.6957 15L29.3478 15L36 15L29.3479 22.5Z",fill:"#202020"}))};var v=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),i=a[0],o=a[1];Object(n.useEffect)((function(){var e,t,a=document.getElementsByClassName("top-bar")[0],n=!1;a.addEventListener("mousedown",(function(r){n=!0,a.classList.add("active"),e=r.pageX-a.offsetLeft,t=a.scrollLeft})),a.addEventListener("mouseleave",(function(){n=!1,a.classList.remove("active")})),a.addEventListener("mouseup",(function(){n=!1,a.classList.remove("active")})),a.addEventListener("mousemove",(function(r){if(n){r.preventDefault();var i=2*(r.pageX-a.offsetLeft-e);a.scrollLeft=t-i}}))}));var s=function(t){var a,n,r,i=Object(p.a)(t.dependsOn);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(n=e.sensors[o],r=e.environment,!(Array.isArray(n.limit.value)?n.limit.value[0]<n.value&&n.value<n.limit.value[1]:"RELATIVE"===n.limit.valueType?n.limit.value>Math.abs(n.value-r[n.limit.relativeToEnviron].value):n.value<n.limit.value))return!1}}catch(s){i.e(s)}finally{i.f()}return!!function(e,t){var a=!1;return e.requires.forEach((function(e){t[e.which].value!==e.value&&(a=!0)})),!a}(t,e.environment)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"top-bar"},Object.entries(e.transitions).map((function(t,a){var n=Object(m.a)(t,2),i=n[0],o=n[1];return r.a.createElement("span",null,r.a.createElement("button",{className:"transition ".concat(e.currentNode,"-").concat(i),key:"tr-top".concat(a),onClick:function(){return e.stepInGraph(i)},style:{backgroundColor:s(o)?"#9B9B9B":"rgb(217,83,79)"}},o.label))}))),r.a.createElement("button",{style:{cursor:0===Object.entries(e.transitions).length?"not-allowed":"pointer"},disabled:0===Object.entries(e.transitions).length,className:"start-button",onClick:function(){e.stepInGraph(i?null:e.initial),o(!i)}},i?r.a.createElement(d,null):r.a.createElement(h,null)))},y=a(28);function b(){f.Shape.defineFigureGenerator("Ring",(function(e,t,a){var n=e?e.parameter1:NaN;(isNaN(n)||n<0)&&(n=8);var r=t/2,i=new f.Geometry,o=new f.PathFigure(t,t/2,!0);return i.add(o),o.add(new f.PathSegment(f.PathSegment.Arc,0,360,r,r,r,r).close()),o.add(new f.PathSegment(f.PathSegment.Arc,0,360,r,r,r-4,r-4).close()),i.spot1=new f.Spot(.156,.156),i.spot2=new f.Spot(.844,.844),i.defaultStretch=f.GraphObject.Uniform,i}));var e=f.GraphObject.make,t=e(f.Diagram,{"undoManager.isEnabled":!0,"clickCreatingTool.archetypeNodeData":{text:"new node",color:"lightblue"},model:e(f.GraphLinksModel,{linkKeyProperty:"key"})});return t.nodeTemplate=e(f.Node,"Auto",e(f.Shape,"Circle",new f.Binding("fill","color")),e(f.TextBlock,{margin:4,stroke:"black"},new f.Binding("text","name"))),t.nodeTemplateMap.add("Final",e(f.Node,"Auto",e(f.Shape,"Ring",new f.Binding("fill","color")),e(f.TextBlock,{margin:5,stroke:"black"},new f.Binding("text","name")))),t.linkTemplate=e(f.Link,{curve:f.Link.Bezier,curviness:50,adjusting:f.Link.Stretch,reshapable:!0,relinkableFrom:!0,relinkableTo:!0,toShortLength:3},e(f.Shape),e(f.Shape,{toArrow:"Standard"}),e(f.Panel,"Auto",e(f.Shape,{fill:e(f.Brush,"Radial",{0:"rgb(245, 245, 245)",.7:"rgb(245, 245, 245)",1:"rgba(245, 245, 245, 0)"}),stroke:null}),e(f.TextBlock,"transition",{textAlign:"center",font:"9pt helvetica, arial, sans-serif",margin:4},new f.Binding("text").makeTwoWay()))),t}var g=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={currentNode:null,states:[],transitions:[],transitionGraph:[],initial:null},n.stepInGraph=function(e){n.setState({currentNode:e},(function(){n.diagramRef.current.getDiagram().model.commit((function(t){var a,n=null,r=Object(p.a)(t.nodeDataArray);try{for(r.s();!(a=r.n()).done;){var i=a.value;t.set(i,"color","white"),i.key==e&&(n=i)}}catch(o){r.e(o)}finally{r.f()}t.set(n,"color","#8a8a8a")}),"increment"),n.props.setCurrentNodeLayout(e)}))},n.diagramRef=r.a.createRef(),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.a,{initDiagram:b,divClassName:"diagram-component",ref:this.diagramRef,nodeDataArray:this.props.nodeDataArray,linkDataArray:this.props.linkDataArray,onModelChange:function(){}}),r.a.createElement(v,{initial:this.props.initial,stepInGraph:this.stepInGraph,incrementData:this.incrementData,sensors:this.props.sensors,environment:this.props.environment,currentNode:this.state.currentNode,transitions:null!==this.state.currentNode?this.props.transitionGraph[this.state.currentNode]:{}}))}}]),a}(n.Component),E=a(59),k=a(61),w=a(62),L=function(){return r.a.createElement("svg",{width:"46",height:"46",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.2792 37.2599L36.6033 31.9358L27.9517 23.2842L36.6032 14.6327L31.2791 9.30857L22.6276 17.9601L13.9759 9.30841L8.65179 14.6325L17.3035 23.2842L8.65168 31.936L13.9758 37.2601L22.6276 28.6083L31.2792 37.2599Z",fill:"white"}))},S=Object(E.a)({root:{width:250,color:"#1c1c1c"},rail:{height:2,opacity:.5,backgroundColor:"#bfbfbf"},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},mark:{backgroundColor:"#bfbfbf",height:8,width:1,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}});function N(e){return"".concat(e)}function O(e){var t=S();return r.a.createElement("div",{className:t.root},r.a.createElement(k.a,{id:"range-slider",gutterBottom:!0},e.label),r.a.createElement(w.a,{value:e.value,onChange:function(t,a){e.handleChangeValue(a)},valueLabelDisplay:"auto","aria-labelledby":"range-slider",getAriaValueText:N,min:e.min,step:e.step,max:e.max}))}function C(e){var t=S();return r.a.createElement("div",{className:t.root},r.a.createElement(k.a,{id:"range-slider",gutterBottom:!0},e.label),r.a.createElement(w.a,{value:e.value,onChange:function(t,a){e.handleChangeValue(a)},valueLabelDisplay:"auto","aria-labelledby":"range-slider",getAriaValueText:N,min:e.min,step:e.step,max:e.max}))}var x=function(e){return r.a.createElement("div",{className:"information-area"},r.a.createElement("h1",null,e.currentState.name),r.a.createElement("p",null,e.currentState.information))},j=function(e){var t=Object(n.useState)("Sensors"),a=Object(m.a)(t,2),i=a[0],o=a[1];return r.a.createElement("div",{className:"tab-options"},["Sensors","Limits","Internal State"].map((function(t,a){return r.a.createElement("button",{key:a,style:{color:t===i?"#0F0F0F":"#B9B9B9"},onClick:function(){e.changeTab(t),o(t)}},t)})))};function A(e){var t=Object(n.useState)(e.env.value),a=Object(m.a)(t,2),i=a[0],o=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,e.env.label),r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",defaultChecked:e.env.value,onChange:function(){e.envChangeBool(e.env.key)(!i),o(!i)}}),r.a.createElement("span",{className:"slider round"})))}var B=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={isLoaded:!1,currentTab:"Sensors",errored:!1,errorMessage:""},e.sensorChange=function(t){return function(a){var n=a.target.value,r=Object.assign({},e.props.sensors);r[t].value=n,e.props.machineSetter.sensors(r)}},e.envChange=function(t){return function(a){var n=a.target.value,r=Object.assign({},e.props.environment);r[t].value=n,e.props.machineSetter.environment(r)}},e.envChangeBool=function(t){return function(a){var n=Object.assign({},e.props.environment);n[t].value=a,e.props.machineSetter.environment(n)}},e.limitsChange=function(t){return function(a){var n=Object.assign({},e.props.sensors);n[t].limit.value=a,e.props.machineSetter.sensors(n)}},e.renderBottomView=function(){switch(e.state.currentTab){case"Sensors":return r.a.createElement("div",{className:"sensors"},Object.values(e.props.sensors).map((function(t,a){return r.a.createElement("div",{className:"value-input",key:"sens".concat(a)},r.a.createElement("label",{className:"input-label",htmlFor:t.name},t.name),r.a.createElement("input",{type:"text",name:"",id:t.name,value:t.value,onInput:e.sensorChange(t.key)}))})));case"Limits":return Object.values(e.props.sensors).map((function(t,a){return r.a.createElement("div",{key:"lim".concat(a),className:"slide-box"},"RANGE"===t.limit.valueType?r.a.createElement(O,{value:t.limit.value,label:t.limit.label,min:t.limit.min,max:t.limit.max,step:t.limit.step,handleChangeValue:e.limitsChange(t.key)}):r.a.createElement(C,{value:t.limit.value,label:t.limit.label,min:t.limit.min,max:t.limit.max,step:t.limit.step,handleChangeValue:e.limitsChange(t.key)}))}));case"Internal State":return r.a.createElement("div",{className:"internal-state"},Object.values(e.props.environment).map((function(t,a){return"FLOAT"===t.type?r.a.createElement("div",{className:"value-input",key:"is".concat(a)},r.a.createElement("label",{className:"input-label",htmlFor:t.label},t.label),r.a.createElement("input",{type:"text",name:"",id:t.label,value:t.value,onInput:e.envChange(t.key)})):"BOOL"===t.type?r.a.createElement("div",{className:"value-input"},r.a.createElement(A,{env:t,envChangeBool:e.envChangeBool})):void 0})))}},e}return Object(l.a)(a,[{key:"setErrorMessageLoading",value:function(e){}},{key:"loadMachine",value:function(){var e,t=this,a=document.getElementById("textarea-json").value;try{e=JSON.parse(a)}catch(f){throw"Invalid JSON format"}if(!("environment"in e)||!("sensors"in e)||!("states"in e)||!("transitions"in e))throw"Missing fields for finite state machine";var n={},r={};e.sensors.forEach((function(e){if(n[e.key])throw"Duplicate key for sensors: ".concat(e.key);if("number"!==typeof e.minValue||"number"!==typeof e.maxValue)throw"Minimum and maximum values for sensor ".concat(e.key," must be real numbers");if(e.minValue>=e.maxValue)throw"Maximum value for sensor ".concat(e.key," must be strictly greater than the minimum value");if(!e.limit.label)throw"Limit label for sensor ".concat(e.key," must be set");if(!e.limit.label)throw"Limit label for sensor ".concat(e.key," must be set");if("number"!==typeof e.limit.min||"number"!==typeof e.limit.max)throw"Minimum and maximum limit thresholds for sensor ".concat(e.key," must be real numbers");if(e.limit.minValue>=e.limit.maxValue)throw"Maximum limit threshold value for sensor ".concat(e.key," must be strictly greater than the minimum value");if("NUMBER"!==e.limit.valueType&&"RANGE"!==e.limit.valueType&&"RELATIVE"!==e.limit.valueType)throw"Limit value type of sensor ".concat(e.key," must either NUMBER, RANGE or RELATIVE");n[e.key]=!0,r[e.key]=e})),this.props.machineSetter.sensors(r);var i={},o={};e.environment.forEach((function(e){if(i[e.key])throw"Duplicate key for internal state: ".concat(e.key);if("BOOL"!==e.type&&"FLOAT"!==e.type)throw"Type for internal state ".concat(e.key," must be either BOOL or FLOAT");if("BOOL"===e.type&&"boolean"!==typeof e.value)throw"Value for internal state ".concat(e.key," must be either true or false");if("FLOAT"===e.type&&"number"!==typeof e.value)throw"Value for internal state ".concat(e.key," must be a real number");i[e.key]=!0,o[e.key]=e})),this.props.machineSetter.environment(o);var s={},l={};e.states.forEach((function(e){if(s[e.key])throw"Duplicate key for states: ".concat(e.key);s[e.key]=!0,l[e.key]=e})),this.props.machineSetter.states(l);var c=!1;e.states.forEach((function(e,a){if("Initial"===e.category){if(c)throw"Two initial states detected!";c=!0,t.props.machineSetter.initial(e.key)}}));var u=Object.values(l).map((function(e,t){return{key:e.key,name:"Q".concat(e.key),color:"white",text:"empty",category:e.category}}));this.props.machineSetter.nodeDataArray(u),e.transitions.forEach((function(e){if(!e.label)throw"Missing label for transition - node ".concat(e.from," to node ").concat(e.to);if(!(e.from in s)||!(e.to in s))throw"Broken link for transition - node ".concat(e.from," to node ").concat(e.to);e.dependsOn.forEach((function(t){if(!(t in n))throw"Sensor for key ".concat(t," was not declared - node ").concat(e.from," to node ").concat(e.to)})),e.requires.forEach((function(t){if(!(t.which in i))throw"Internal state for key ".concat(t.which," was not declared - node ").concat(e.from," to node ").concat(e.to);if("boolean"!==typeof t.value)throw"Internal state for key ".concat(t.which," must be either true or false - node ").concat(e.from," to node ").concat(e.to)}))})),this.props.machineSetter.transitions(e.transitions);var m={};e.states.forEach((function(e){return m[e.key]={}})),e.transitions.forEach((function(e){m[e.from][e.to]={label:e.label,information:e.information,dependsOn:e.dependsOn,requires:e.requires}})),this.props.machineSetter.transitionGraph(m);var p=e.transitions.map((function(e){return{from:e.from,to:e.to,text:e.label}}));this.props.machineSetter.linkDataArray(p),this.setState({isLoaded:!0,errored:!1,errorMessage:""})}},{key:"renderLoader",value:function(){var e=this;return this.state.isLoaded?r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{changeTab:function(t){return e.setState({currentTab:t})}}),this.renderBottomView()):r.a.createElement("div",{className:"json-input"},r.a.createElement("textarea",{id:"textarea-json",cols:"39"}),r.a.createElement("button",{onClick:function(){try{e.loadMachine()}catch(t){e.setState({errored:!0,errorMessage:t},(function(){return e.props.machineSetter.resetToInitial()}))}}},"Load machine"))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"left-panel"},r.a.createElement(x,{currentState:this.props.currentState}),r.a.createElement("div",{className:"separator-bar"}),this.renderLoader()),r.a.createElement("div",{className:"error-container",style:{display:this.state.errored?"flex":"none"}},r.a.createElement("div",{className:"error-message"},this.state.errorMessage),r.a.createElement("div",{className:"error-bubble"},r.a.createElement(L,null))))}}]),a}(n.Component),D={name:"Drona de livrare pachete",information:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur."};function T(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),i=a[0],o=a[1];!function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=t}),[t]),Object(n.useEffect)((function(){if(a&&a.addEventListener){var t=function(e){return r.current(e)};return a.addEventListener(e,t),function(){a.removeEventListener(e,t)}}}),[e,a])}("click",Object(n.useCallback)((function(e){console.log(e.target.className),"string"===typeof e.target.className&&"pr-info"!==e.target.className&&o(!1)}),[]));var s=function(){return r.a.createElement("svg",{width:"8",height:"32",viewBox:"0 0 8 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M0 28V14.2222C0 12.0131 1.79086 10.2222 4 10.2222C6.20914 10.2222 8 12.0131 8 14.2222V20.8889V28C8 30.2091 6.20914 32 4 32C1.79086 32 0 30.2091 0 28Z",fill:"white"}),r.a.createElement("path",{d:"M8 4V4.44444C8 6.65358 6.20914 8.44445 4 8.44445C1.79086 8.44445 0 6.65358 0 4.44444V4C0 1.79086 1.79086 0 4 0C6.20914 0 8 1.79086 8 4Z",fill:"white"}))};return r.a.createElement("div",{className:"info-container pr-info",style:{display:0!==Object.values(e.states).length?"flex":"none"}},r.a.createElement("table",{className:"pr-info",style:{display:i?"flex":"none"}},Object.values(e.states).map((function(e){return r.a.createElement("tr",{className:"pr-info"},r.a.createElement("th",{className:"pr-info"},"Q".concat(e.key)),r.a.createElement("th",{className:"pr-info"},e.name))}))),r.a.createElement("button",{className:"pr-info",onClick:function(){return o(!i)}},r.a.createElement(s,null)))}var M=function(e){return null!==e.displayPopUp?r.a.createElement("div",{className:"pop-up",style:{left:e.displayPopUp[0],top:e.displayPopUp[1]+18}},r.a.createElement("h1",null,e.popUpInfo.name),r.a.createElement("p",null,e.popUpInfo.details)):r.a.createElement("div",{style:{display:"none"}})},I=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={currentNode:null,environment:[],limits:[],sensors:[],states:{},transitions:[],transitionGraph:[],nodeDataArray:[],linkDataArray:[],initial:null,displayPopUp:null,popUpInfo:{name:"",details:""}},e.machineSetter={sensors:function(t){return e.setState({sensors:t})},environment:function(t){return e.setState({environment:t})},states:function(t){return e.setState({states:t})},transitions:function(t){return e.setState({transitions:t})},transitionGraph:function(t){return e.setState({transitionGraph:t})},initial:function(t){return e.setState({initial:t})},nodeDataArray:function(t){return e.setState({nodeDataArray:t})},linkDataArray:function(t){return e.setState({linkDataArray:t})},resetToInitial:function(){e.setState({currentNode:null,environment:[],limits:[],sensors:[],states:{},transitions:[],transitionGraph:[],nodeDataArray:[],linkDataArray:[],initial:null,displayPopUp:null,popUpInfo:{name:"",details:""}})}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("contextmenu",(function(t){if(t.preventDefault(),"string"===typeof t.target.className&&t.target.className.includes("transition")){var a=t.target.className.split(" ")[1].split("-"),n=e.state.transitionGraph[a[0]][a[1]].information;e.setState({popUpInfo:n,displayPopUp:[t.pageX,t.pageY]})}else null!==e.state.displayPopUp&&e.setState({displayPopUp:null});return!1}),!1)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{sensors:this.state.sensors,environment:this.state.environment,states:this.state.states,transitions:this.state.transitions,transitionGraph:this.state.transitionGraph,initial:this.state.initial,setCurrentNodeLayout:function(t){return e.setState({currentNode:t})},linkDataArray:this.state.linkDataArray,nodeDataArray:this.state.nodeDataArray}),r.a.createElement(M,{popUpInfo:this.state.popUpInfo,displayPopUp:this.state.displayPopUp}),r.a.createElement(B,{currentState:null!==this.state.currentNode?this.state.states[this.state.currentNode]:D,sensors:this.state.sensors,environment:this.state.environment,machineSetter:this.machineSetter}),r.a.createElement(T,{states:this.state.states}))}}]),a}(n.Component);var V=function(){return r.a.createElement(I,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.39f38eaa.chunk.js.map