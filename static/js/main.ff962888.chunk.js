(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{30:function(e,t,a){e.exports=a(45)},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(19),o=a.n(i),l=(a(35),a(36),a(37),a(38),a(39),a(9)),s=a(10),c=a(14),u=a(12),m=a(20),p=a(2),h=a(15),d=function(){return r.a.createElement("svg",{width:"36",height:"32",viewBox:"0 0 36 42",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M36 21L0 41.7846V0.215391L36 21Z",fill:"#202020"}))},v=function(){return r.a.createElement("svg",{width:"36",height:"30",viewBox:"0 0 36 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M31.3043 15C31.3043 11.7572 30.2077 8.60165 28.1789 6.00635C26.15 3.41105 23.2981 1.51574 20.0507 0.60445C16.8032 -0.306837 13.335 -0.185021 10.1659 0.951642C6.9967 2.08831 4.29727 4.1786 2.47209 6.90927C0.646908 9.63994 -0.205714 12.8639 0.0419945 16.0981C0.289703 19.3322 1.6244 22.4023 3.84607 24.8483C6.06774 27.2943 9.05673 28.9845 12.3651 29.6655C15.6735 30.3465 19.123 29.9817 22.1969 28.6258L15.6522 15H31.3043Z",fill:"#202020"}),r.a.createElement("ellipse",{cx:"15.6522",cy:"15",rx:"10.9565",ry:"10.5",fill:"white"}),r.a.createElement("path",{d:"M29.3479 22.5L22.6957 15L29.3478 15L36 15L29.3479 22.5Z",fill:"#202020"}))};var f=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),i=a[0],o=a[1],l=function(t){var a,n,r,i=Object(m.a)(t.dependsOn);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(n=e.sensors[o],r=e.environment,!(Array.isArray(n.limit.value)?n.limit.value[0]<n.value&&n.value<n.limit.value[1]:"RELATIVE"===n.limit.valueType?n.limit.value>Math.abs(n.value-r[n.limit.relativeToEnviron].value):n.value<n.limit.value))return!1}}catch(l){i.e(l)}finally{i.f()}return!!function(e,t){var a=!1;return e.requires.forEach((function(e){console.log(t[e.which].value,e.value),t[e.which].value!==e.value&&(a=!0)})),!a}(t,e.environment)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"top-bar"},Object.entries(e.transitions).map((function(t,a){var n=Object(h.a)(t,2),i=n[0],o=n[1];return r.a.createElement("button",{className:"transition ".concat(e.currentNode,"-").concat(i),key:"tr-top".concat(a),onClick:function(){return e.stepInGraph(i)},style:{backgroundColor:l(o)?"#9B9B9B":"#a61c1c"}},o.label)}))),r.a.createElement("button",{className:"start-button",onClick:function(){e.stepInGraph(e.initial),o(!i)}},i?r.a.createElement(v,null):r.a.createElement(d,null)))},g=a(28);function y(){p.Shape.defineFigureGenerator("Ring",(function(e,t,a){var n=e?e.parameter1:NaN;(isNaN(n)||n<0)&&(n=8);var r=t/2,i=new p.Geometry,o=new p.PathFigure(t,t/2,!0);return i.add(o),o.add(new p.PathSegment(p.PathSegment.Arc,0,360,r,r,r,r).close()),o.add(new p.PathSegment(p.PathSegment.Arc,0,360,r,r,r-4,r-4).close()),i.spot1=new p.Spot(.156,.156),i.spot2=new p.Spot(.844,.844),i.defaultStretch=p.GraphObject.Uniform,i}));var e=p.GraphObject.make,t=e(p.Diagram,{"undoManager.isEnabled":!0,"clickCreatingTool.archetypeNodeData":{text:"new node",color:"lightblue"},model:e(p.GraphLinksModel,{linkKeyProperty:"key"})});return t.nodeTemplate=e(p.Node,"Auto",e(p.Shape,"Circle",new p.Binding("fill","color")),e(p.TextBlock,{margin:4,stroke:"black"},new p.Binding("text","name"))),t.nodeTemplateMap.add("Final",e(p.Node,"Auto",e(p.Shape,"Ring",new p.Binding("fill","color")),e(p.TextBlock,{margin:4,stroke:"black"},new p.Binding("text","name")))),t.linkTemplate=e(p.Link,{curve:p.Link.Bezier,curviness:50,adjusting:p.Link.Stretch,reshapable:!0,relinkableFrom:!0,relinkableTo:!0,toShortLength:3},e(p.Shape),e(p.Shape,{toArrow:"Standard"}),e(p.Panel,"Auto",e(p.Shape,{fill:e(p.Brush,"Radial",{0:"rgb(245, 245, 245)",.7:"rgb(245, 245, 245)",1:"rgba(245, 245, 245, 0)"}),stroke:null}),e(p.TextBlock,"transition",{textAlign:"center",font:"9pt helvetica, arial, sans-serif",margin:4},new p.Binding("text").makeTwoWay()))),t}var b=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={currentNode:null,states:[],transitions:[],transitionGraph:[],initial:null},n.stepInGraph=function(e){n.setState({currentNode:e},(function(){n.diagramRef.current.getDiagram().model.commit((function(t){var a,n=null,r=Object(m.a)(t.nodeDataArray);try{for(r.s();!(a=r.n()).done;){var i=a.value;t.set(i,"color","white"),i.key==e&&(n=i)}}catch(o){r.e(o)}finally{r.f()}t.set(n,"color","#3f4c1c")}),"increment"),n.props.setCurrentNodeLayout(e)}))},n.diagramRef=r.a.createRef(),n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g.a,{initDiagram:y,divClassName:"diagram-component",ref:this.diagramRef,nodeDataArray:this.props.nodeDataArray,linkDataArray:this.props.linkDataArray,onModelChange:function(){}}),r.a.createElement(f,{initial:this.props.initial,stepInGraph:this.stepInGraph,incrementData:this.incrementData,sensors:this.props.sensors,environment:this.props.environment,currentNode:this.state.currentNode,transitions:null!==this.state.currentNode?this.props.transitionGraph[this.state.currentNode]:{}}))}}]),a}(n.Component),E=a(59),k=a(61),S=a(62),w=Object(E.a)({root:{width:250,color:"#1c1c1c"},rail:{height:2,opacity:.5,backgroundColor:"#bfbfbf"},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},mark:{backgroundColor:"#bfbfbf",height:8,width:1,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}});function C(e){return"".concat(e,"sdsddsadasasdsadasC")}function N(e){var t=w();return r.a.createElement("div",{className:t.root},r.a.createElement(k.a,{id:"range-slider",gutterBottom:!0},e.label),r.a.createElement(S.a,{value:e.value,onChange:function(t,a){e.handleChangeValue(a)},valueLabelDisplay:"auto","aria-labelledby":"range-slider",getAriaValueText:C,min:e.min,step:e.step,max:e.max}))}function O(e){var t=w();return r.a.createElement("div",{className:t.root},r.a.createElement(k.a,{id:"range-slider",gutterBottom:!0},e.label),r.a.createElement(S.a,{value:e.value,onChange:function(t,a){e.handleChangeValue(a)},valueLabelDisplay:"auto","aria-labelledby":"range-slider",getAriaValueText:C,min:e.min,step:e.step,max:e.max}))}var x=function(e){return r.a.createElement("div",{className:"information-area"},r.a.createElement("h1",null,e.currentState.name),r.a.createElement("p",null,e.currentState.information))},j=function(e){var t=Object(n.useState)("Sensors"),a=Object(h.a)(t,2),i=a[0],o=a[1];return r.a.createElement("div",{className:"tab-options"},["Sensors","Limits","Internal State"].map((function(t,a){return r.a.createElement("button",{key:a,style:{color:t===i?"#0F0F0F":"#B9B9B9"},onClick:function(){e.changeTab(t),o(t)}},t)})))};function A(e){var t=Object(n.useState)(e.env.value),a=Object(h.a)(t,2),i=a[0],o=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,e.env.label),r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",defaultChecked:e.env.value,onChange:function(){e.envChangeBool(e.env.key)(!i),o(!i)}}),r.a.createElement("span",{className:"slider round"})))}var L=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={isLoaded:!1,currentTab:"Sensors"},e.sensorChange=function(t){return function(a){var n=a.target.value;console.log("Sensor val:",a.target.value);var r=Object.assign({},e.props.sensors);r[t].value=n,e.props.machineSetter.sensors(r)}},e.envChange=function(t){return function(a){var n=a.target.value;console.log("Env val:",a.target.value);var r=Object.assign({},e.props.environment);r[t].value=n,e.props.machineSetter.environment(r)}},e.envChangeBool=function(t){return function(a){console.log("Env val:",a);var n=Object.assign({},e.props.environment);n[t].value=a,e.props.machineSetter.environment(n)}},e.limitsChange=function(t){return function(a){console.log("VAL E",a);var n=Object.assign({},e.props.sensors);n[t].limit.value=a,e.props.machineSetter.sensors(n)}},e.renderBottomView=function(){switch(e.state.currentTab){case"Sensors":return r.a.createElement("div",{className:"sensors"},Object.values(e.props.sensors).map((function(t,a){return r.a.createElement("div",{className:"value-input",key:"sens".concat(a)},r.a.createElement("label",{className:"input-label",htmlFor:t.name},t.name),r.a.createElement("input",{type:"text",name:"",id:t.name,value:t.value,onInput:e.sensorChange(t.key)}))})));case"Limits":return Object.values(e.props.sensors).map((function(t,a){return r.a.createElement("div",{key:"lim".concat(a),className:"slide-box"},"RANGE"===t.limit.valueType?r.a.createElement(N,{value:t.limit.value,label:t.limit.label,min:t.limit.min,max:t.limit.max,step:t.limit.step,handleChangeValue:e.limitsChange(t.key)}):r.a.createElement(O,{value:t.limit.value,label:t.limit.label,min:t.limit.min,max:t.limit.max,step:t.limit.step,handleChangeValue:e.limitsChange(t.key)}))}));case"Internal State":return r.a.createElement("div",{className:"internal-state"},Object.values(e.props.environment).map((function(t,a){return"FLOAT"===t.type?r.a.createElement("div",{className:"value-input",key:"is".concat(a)},r.a.createElement("label",{className:"input-label",htmlFor:t.label},t.label),r.a.createElement("input",{type:"text",name:"",id:t.label,value:t.value,onInput:e.envChange(t.key)})):"BOOL"===t.type?r.a.createElement("div",{className:"value-input"},r.a.createElement(A,{env:t,envChangeBool:e.envChangeBool})):void 0})))}},e}return Object(s.a)(a,[{key:"setErrorMessageLoading",value:function(e){}},{key:"loadMachine",value:function(){var e,t=this,a=document.getElementById("textarea-json").value;try{e=JSON.parse(a)}catch(c){return void this.setErrorMessageLoading("Invalid JSON format")}var n={};e.sensors.forEach((function(e){return n[e.key]=e})),this.props.machineSetter.sensors(n);var r={};e.environment.forEach((function(e){return r[e.key]=e})),this.props.machineSetter.environment(r);var i={};e.states.forEach((function(e){return i[e.key]=e})),this.props.machineSetter.states(i),e.states.forEach((function(e,a){"Initial"===e.category&&t.props.machineSetter.initial(e.key)}));var o=Object.values(i).map((function(e,t){return{key:e.key,name:"Q".concat(e.key),color:"white",text:"empty",category:e.category}}));this.props.machineSetter.nodeDataArray(o),this.props.machineSetter.transitions(e.transitions);var l={};e.states.forEach((function(e){return l[e.key]={}})),e.transitions.forEach((function(e){l[e.from][e.to]={label:e.label,information:e.information,dependsOn:e.dependsOn,requires:e.requires}})),this.props.machineSetter.transitionGraph(l);var s=e.transitions.map((function(e){return{from:e.from,to:e.to,text:e.label}}));this.props.machineSetter.linkDataArray(s),console.log(e),this.setState({isLoaded:!0})}},{key:"renderLoader",value:function(){var e=this;return this.state.isLoaded?r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{changeTab:function(t){return e.setState({currentTab:t})}}),this.renderBottomView()):r.a.createElement("div",{className:"json-input"},r.a.createElement("textarea",{id:"textarea-json",cols:"39"}),r.a.createElement("button",{onClick:function(){return e.loadMachine()}},"Load machine"))}},{key:"render",value:function(){return r.a.createElement("div",{className:"left-panel"},r.a.createElement(x,{currentState:this.props.currentState}),r.a.createElement("hr",null),this.renderLoader())}}]),a}(n.Component),B={name:"Hello",information:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur."},D=function(e){return null!==e.displayPopUp?r.a.createElement("div",{className:"pop-up",style:{left:e.displayPopUp[0],top:e.displayPopUp[1]+18}},r.a.createElement("h1",null,e.popUpInfo.name),r.a.createElement("p",null,e.popUpInfo.details)):r.a.createElement("div",{style:{display:"none"}})},T=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={currentNode:null,environment:[],limits:[],sensors:[],states:{},transitions:[],transitionGraph:[],nodeDataArray:[],linkDataArray:[],initial:null,displayPopUp:null,popUpInfo:{name:"",details:""}},e.machineSetter={sensors:function(t){return e.setState({sensors:t})},environment:function(t){return e.setState({environment:t})},states:function(t){return e.setState({states:t})},transitions:function(t){return e.setState({transitions:t})},transitionGraph:function(t){return e.setState({transitionGraph:t})},initial:function(t){return e.setState({initial:t})},nodeDataArray:function(t){return e.setState({nodeDataArray:t})},linkDataArray:function(t){return e.setState({linkDataArray:t})}},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("contextmenu",(function(t){if(t.preventDefault(),"string"===typeof t.target.className&&t.target.className.includes("transition")){var a=t.target.className.split(" ")[1].split("-"),n=e.state.transitionGraph[a[0]][a[1]].information;e.setState({popUpInfo:n,displayPopUp:[t.pageX,t.pageY]})}else null!==e.state.displayPopUp&&e.setState({displayPopUp:null});return!1}),!1),document.addEventListener("click",(function(t){"pop-up"!==t.target.className&&e.setState({displayPopUp:null})}),!0)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{sensors:this.state.sensors,environment:this.state.environment,states:this.state.states,transitions:this.state.transitions,transitionGraph:this.state.transitionGraph,initial:this.state.initial,setCurrentNodeLayout:function(t){return e.setState({currentNode:t})},linkDataArray:this.state.linkDataArray,nodeDataArray:this.state.nodeDataArray}),r.a.createElement(D,{popUpInfo:this.state.popUpInfo,displayPopUp:this.state.displayPopUp}),r.a.createElement(L,{currentState:null!==this.state.currentNode?this.state.states[this.state.currentNode]:B,sensors:this.state.sensors,environment:this.state.environment,machineSetter:this.machineSetter}))}}]),a}(n.Component);var G=function(){return r.a.createElement(T,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.ff962888.chunk.js.map